{
	"actions": [
		{
			"@name": "libraries-bundle",
			"@displayName": "Compiling foundation libraries...",
			"@action": "bundle",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"baseUrl": "src",
			"globs": [
				"**/src/libraries/**"
			],
			"dest": "src/core/js/libraries/libraries.js"
		},
		{
			"@name": "libraries-javascript",
			"@displayName": "Building foundation libraries...",
			"@action": "javascript",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"dynamic": false,
			"baseUrl": "src/core/js",
			"name": "libraries/libraries",
			"globs": [ "**/core/js/libraries/*.js" ],
			"optimize": "uglify2",
    		"generateSourceMaps": true,
			"sourceMapRelocate": "../../../src/core",
			"paths": {
				"jquery": "empty:",
				"handlebars": "libraries/handlebars",
				"underscore": "libraries/underscore",
				"imageReady": "libraries/imageReady",
				"inview": "libraries/inview",
				"velocity": "libraries/velocity",
				"backbone-lib": "libraries/backbone-lib",
				"backbone": "libraries/backbone",
				"bowser": "libraries/bowser",
				"scrollTo": "libraries/scrollTo",
				"a11y": "libraries/jquery.a11y",
				"modernizr": "libraries/modernizr"
			},
			"shim": {
				"backbone": [
					"underscore"
				],
				"libraries/libraries": [
					"handlebars",
					"underscore",
					"imageReady",
					"inview",
					"velocity",
					"backbone",
					"bowser",
					"scrollTo",
					"a11y",
					"modernizr"
				]
			},
			"dest": "{{outputDest}}/{{course}}/adapt/js/libraries.js"
		},
		{
			"@name": "core-javascript",
			"@displayName": "Building framework javascript...",
			"@action": "javascript",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"dynamic": false,
			"baseUrl": "src/core/js",
			"globs": [ "*.js" ],
			"name": "app",
			"optimize": "uglify2",
    		"generateSourceMaps": true,
			"sourceMapRelocate": "../../../src/core/",
			"includes": {
				"coreJS" : {
					"src/core/js/": [
						"**/src/core/js/*.js",
						"!app.js",
						"!helpers.js",
						"!libraries/",
						"!scriptLoader.js"
					]
				},
				"coreModels": {
					"src/core/js/models/": "**/src/core/js/models/*.js"
				},
				"coreViews": {
					"src/core/js/views/": "**/src/core/js/views/*.js"
				}
			},
			"paths": {
				"coreHelpers": "helpers",
				"coreJS/libraries/bowser": "empty:",
				"underscore": "empty:",
				"handlebars": "empty:",
				"backbone": "empty:",
				"a11y": "empty:",
				"velocity": "empty:",
				"imageReady": "empty:",
				"inview": "empty:",
				"templates": "empty:",
				"jquery": "empty:",
				"scrollTo": "empty:",
				"components": "empty:",
				"extensions": "empty:",
				"menu": "empty:",
				"theme": "empty:"
			},
			"dest": "{{outputDest}}/{{course}}/adapt/js/core.js"
		},
		{
			"@name": "bundles-handlebars",
			"@displayName": "Building plugin templates...",
			"@action": "handlebars",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"src": [ 
				"src/components",
				"src/extensions",
				"src/menu",
				"src/theme"
			],
			"dest": "{{outputDest}}/{{course}}/adapt/js/templates.js",
			"paritalGlobs": [ "**/partials/**" ],
			"globs":  [ 
				"**/templates/**/*.hbs", 
				"**/templates/**/*.html", 
				"**/templates/**/*.handlebars", 
				"**/templates/**/*.htm" 
			],
			"requires": {
				"Handlebars": "handlebars"
			},
			"context": "Handlebars.templates"
		},
		{
			"@name": "bundles-less",
			"@displayName": "Building plugin less...",
			"@action": "less",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"reloadType": "css",
			"baseUrl": "src",
			"sourceMapFileInline": false,
			"outputSourceFiles": true,
			"sourceMapBasepath": "src",
			"sourceMapURL": "adapt.css.map",
			"sourceMapRelocate": "../../../src/",
			"compress": true,
			"src": [ 
				"src/core",
				"src/components",
				"src/extensions",
				"src/menu",
				"src/theme"
				
			],
			"dest": "{{outputDest}}/{{course}}/adapt/css/adapt.css",
			"globs":  [ "**/less/**/*.less" ]
		},
		
		{
			"@name": "bundles-bundle",
			"@displayName": "Compiling plugin javascript",
			"@action": "bundle",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"baseUrl": "src",
			"globs": [
				"**/src/extensions",
				"**/src/components",
				"**/src/menu",
				"**/src/theme",
				"**/src/extensions/**",
				"**/src/components/**",
				"**/src/menu/**",
				"**/src/theme/**"
			],
			"dest": "src/bundles.js"
		},
		{
			"@name": "bundles-javascript",
			"@displayName": "Building plugin javascript",
			"@action": "javascript",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"baseUrl": "src",
			"name": "bundles",
			"globs": [ 
				"**/src/extensions/**/*.js",
				"**/src/components/**/*.js",
				"**/src/menu/**/*.js",
				"**/src/theme/**/*.js"
			],
			"optimize": "uglify2",
    		"generateSourceMaps": true,
			"sourceMapRelocate": "../../../src/",
			"empties": {
				"coreJS" : {
					"src/core/js/": "*.js"
				},
				"coreModels": {
					"src/core/js/models/": "*.js"
				},
				"coreViews": {
					"src/core/js/views/": "*.js"
				}
			},
			"paths": {
				"coreHelpers": "empty:",
				"coreJS/libraries/bowser": "empty:",
				"underscore": "empty:",
				"handlebars": "empty:",
				"backbone": "empty:",
				"a11y": "empty:",
				"velocity": "empty:",
				"imageReady": "empty:",
				"inview": "empty:",
				"templates": "empty:",
				"jquery": "empty:",
				"scrollTo": "empty:",
				"bundles": "bundles"
			},
			"dest": "{{outputDest}}/{{course}}/adapt/js/bundles.js"
		},
		{
			"@name": "foundation-libraries",
			"@displayName": "Synching external libraries...",
			"@action": "copy",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"root": "src/core/js/",
			"src": "libraries",
			"globs": [
				"jquery.v2.js",
				"jquery.js",
				"require.js",
				"modernizr.js",
				"consoles.js",
				"json2.js"
			],
			"dest": "{{outputDest}}/{{course}}"
		},
		{
			"@name": "foundation-scriptLoader",
			"@displayName": "Synching script loader...",
			"@action": "copy",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"root": "src/core/js/",
			"src": "",
			"globs": [
				"scriptLoader.js"
			],
			"dest": "{{outputDest}}/{{course}}/adapt/js"
		},
		{
			"@name": "loader",
			"@displayName": "Synching make resources...",
			"@action": "copy",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"root": "make/res/",
			"src": "",
			"globs": [
				"**/**"
			],
			"dest": "{{outputDest}}/{{course}}"
		},
		{
			"@name": "foundation-index.html",
			"@displayName": "Synching index.html",
			"@action": "copy",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"root": "src",
			"src": "",
			"globs": [
				"!**/make/**",
				"!**/core/**",
				"!**/extensions/**",
				"!**/components/**",
				"!**/theme/**",
				"!**/menu/**",
				"index.html"				
			],
			"dest": "{{outputDest}}/{{course}}"
		},
		{
			"@name": "course-folder",
			"@displayName": "Synching course folder...",
			"@action": "copy",
			"@types": [ "src/course" ],
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"root": "src/course",
			"src": "",
			"globs": [
				"**"
			],
			"dest": "{{dest}}/course"
		},
		{
			"@name": "course-folder",
			"@displayName": "Synching course folder...",
			"@action": "copy",
			"@types": [ "src/courses" ],
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"root": "src/courses/{{course}}/",
			"src": "",
			"globs": [
				"**"
			],
			"dest": "{{outputDest}}/{{course}}/course"
		},
		{
			"@name": "bundles-required-folder",
			"@displayName": "Synching plugin required folders...",
			"@action": "collate",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"on": "required",
			"root": "src",
			"src": "",
			"globs": [
				"**/extensions/**/required/**",
				"**/components/**/required/**",
				"**/theme/**/required/**",
				"**/menu/**/required/**"		
			],
			"diffGlobs": [
				"!**/adapt/**",
				"!**/adapt",
				"!**/assets/**",
				"!**/assets",
				"!**/course/**",
				"!**/course",
				"!**/libraries/**",
				"!**/libraries",
				"!index.html",
				"**"
			],
			"dest": "{{outputDest}}/{{course}}"
		},
		{
			"@name": "bundles-assets-folder",
			"@displayName": "Synching plugin asset folders...",
			"@action": "collate",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"on": "assets",
			"root": "src",
			"src": "",
			"globs": [
				"**/extensions/**/assets/**",
				"**/components/**/assets/**",
				"**/menu/**/assets/**"		
			],
			"diffGlobs": [
				"**"
			],
			"dest": "{{outputDest}}/{{course}}/assets"
		},
		{
			"@name": "bundles-fonts-folder",
			"@displayName": "Synching font folders...",
			"@action": "collate",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"on": "fonts",
			"root": "src",
			"src": "",
			"globs": [
				"**/extensions/**/fonts/**",
				"**/components/**/fonts/**",
				"**/menu/**/fonts/**",
				"**/theme/**/fonts/**"			
			],
			"diffGlobs": [
				"**"
			],
			"dest": "{{outputDest}}/{{course}}/adapt/css/fonts"
		},
		{
			"@name": "theme-assets-folder",
			"@displayName": "Synching theme asset folders...",
			"@action": "collate",
			"@excludeOnSwitches": [
				"trackinginsert",
				"trackingdelete",
				"trackingreset"
			],
			"on": "assets",
			"root": "src",
			"src": "",
			"globs": [
				"**/theme/**/assets/**"	
			],
			"diffGlobs": [
				"**"
			],
			"dest": "{{outputDest}}/{{course}}/adapt/css/assets"
		},
		{
			"@name": "json-lint",
			"@displayName": "Linting json...",
			"@action": "json",
			"@types": [ "builds/courses/course", "src/courses" ],
			"src": "builds/{{course}}/course",
			"globs": "**/*.json"
		},
		{
			"@name": "json-lint",
			"@displayName": "Linting json...",
			"@action": "json",
			"@types": [ "src/course" ],
			"src": "build/course",
			"globs": "**/*.json"
		},
		{
			"@name": "trackinginsert",
			"@displayName": "Inserting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackinginsert"
			],
			"@types": [ "src/course" ],
			"blocksPath": {
				"src": "src/course",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "src/course",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackinginsert",
			"@displayName": "Inserting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackinginsert"
			],
			"@types": [ "src/courses" ],
			"blocksPath": {
				"src": "src/courses/{{course}}",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "src/courses/{{course}}",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackinginsert",
			"@displayName": "Inserting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackinginsert"
			],
			"@types": [ "builds/courses/course" ],
			"blocksPath": {
				"src": "{{outputDest}}/{{course}}/course",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "{{outputDest}}/{{course}}/course",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackingdelete",
			"@displayName": "Deleting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackingdelete"
			],
			"@types": [ "src/course" ],
			"blocksPath": {
				"src": "{{outputDest}}/{{course}}/course",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "{{outputDest}}/{{course}}/course",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackingdelete",
			"@displayName": "Deleting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackingdelete"
			],
			"@types": [ "src/courses" ],
			"blocksPath": {
				"src": "src/courses/{{course}}",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "src/courses/{{course}}",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackingdelete",
			"@displayName": "Deleting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackingdelete"
			],
			"@types": [ "builds/courses/course" ],
			"blocksPath": {
				"src": "builds/{{course}}/course",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "builds/{{course}}/course",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackingreset",
			"@displayName": "Resetting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackingreset"
			],
			"@types": [ "src/course" ],
			"blocksPath": {
				"src": "src/course",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "src/course",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackingreset",
			"@displayName": "Resetting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackingreset"
			],
			"@types": [ "src/courses" ],
			"blocksPath": {
				"src": "src/courses/{{course}}",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "builds/courses/{{course}}",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "trackingreset",
			"@displayName": "Resetting tracking ids...",
			"@action": "tracking",
			"@onlyOnSwitches": [
				"trackingreset"
			],
			"@types": [ "builds/courses/course" ],
			"blocksPath": {
				"src": "builds/{{course}}/course",
				"glob": "**/blocks.json"
			},
			"coursePath": {
				"src": "builds/{{course}}/course",
				"glob": "**/course.json"
			}
		},
		{
			"@name": "zip",
			"@displayName": "Creating sco zip",
			"@action": "zip",
			"@onlyOnSwitches": [
				"zip"
			],
			"@types": [ "builds/courses/course", "src/courses" ],
			"root": "builds/{{course}}",
			"src": "",
			"globs": [
				"!*.zip",
				"**"
			],
			"dest": "~/Desktop/scos/{{scoDate}}{{#if projectCode}}_{{projectCode}}{{/if}}_{{course}}.zip"
		},
		{
			"@name": "zip",
			"@displayName": "Creating sco zip",
			"@action": "zip",
			"@onlyOnSwitches": [
				"zip"
			],
			"@types": [ "src/course" ],
			"root": "build",
			"src": "",
			"globs": [
				"!*.zip",
				"**"
			],
			"dest": "~/Desktop/scos/{{scoDate}}{{#if projectCode}}_{{projectCode}}{{/if}}_{{course}}.zip"
		}
	]
}